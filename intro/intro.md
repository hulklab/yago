## go-scaffold

近年来，我们团队陆续在尝试用 go 写项目，beego 的路由对于 phper 来说比较友好，所以之前的项目我们基本都是基于 beego 来开发。

不过 beego 的内置 ORM 并不友好（一家之见），一些基础包如，redis，kafka 等也没有，每次新开一个项目都需要重新组织一遍代码。

于是我们诞生了一个想法，能不能创建一个脚手架，只保留 beego 的路由功能，其他的包我们去找社区 star 最多的，也就是说，我们不造新轮子，只把社区最好的轮子组合起来。
恰如毕加索所言，拙劣的艺术家模仿，伟大的艺术家偷取。

这样每次新的项目都可以基于这个脚手架(或者叫模版)来构造，而项目只需要关注业务本身，所需的包这个脚手架拿来即用。

我们一边讨论这个脚手架的代码组织结构，一边选型基础依赖的包，一边搭建脚手架。

在我们改造 beego 路由的时候，始终有些别扭，我们发现，路由直接使用 gin 似乎更轻量一些，我们也不必为导入整个 beego 的包产生心理负担了。

配置文件我们采用 viper 这个包来读取， 并且选用 toml 这个最简约，最强大的格式作为默认配置文件后缀。

日志选用的 logrus，但是它没有日志切割，归档功能，lumberjack 完美解决这个问题。

数据库 ORM 社区 star 最多的是 gorm，但是我们体验一番后，发现 xorm 更符合我们之前的书写风格，于是选用了 xorm。

redis 包有 redigo 和 go-redis 两个选择，根据之前项目的使用经验，redigo 要更稳定一些，于是采用了 redigo。

grpc 自然要选用官方 grpc。

因为要支持命令行功能，我们封装了 cobra 包。

因为要支持定时脚本任务功能，我们封装了 cron 类库。

基本上核心的功能都有了，于是我们在内部仓库创建了一个项目，取名叫 go-scaffold，恰逢今年年初我们团队在支持智慧城市的项目，基于这个脚手架我们创建了三个项目。

## yago
我们在开发新项目的同时，也在调整 go-scaffold，因为之前我们定位它是脚手架，所以她的代码在每个项目里面都有一份。

这样一来每次改动脚手架，我们都需要在三个项目里面改一遍。

一段时间下来，我们开始重新思考 go-scaffold 的定位，虽然我们极不愿意把她当一个框架来看待，但似乎把它做成框架的形式，后续的开发要更方便一些。

重新组织代码之后，我们在公司内部仓库建了一个新项目，取名叫 yago。

可是很快我们又遇到了新的问题，由于众所周知的墙的问题，我们在 go get 拉取依赖包的时候，必须要指定 GOPROXY 代理，在 go 1.13 之前又无法设置过滤，这样一来我们就拉不到内部仓库的包了。

我们只好将它在 github.com 上开源了，也就是现在大家看到的 hulklab/yago 拉。

## 取名
之所以取名叫 yago，灵感来源于鸟哥的 yaf 框架(yet another frame)，表达一种简洁，低调，朴实，但是又很好用的中心思想。
而且 yago 写起来还很顺手。

说到取名，我不得不说，我们开发团队的「晓」是个取名的好手，之前的 go-scaffold 和 yago 都是出自他的手笔。